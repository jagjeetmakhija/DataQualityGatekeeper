
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phase-1 Local Insights Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="header-card">
        <h1>üß† Phase-1 Local Insights Dashboard</h1>
        <div class="status-row">
            <span class="status-badge green">üñ•Ô∏è Localhost Only</span>
            <span class="status-badge">üìÖ <span id="timestamp"></span></span>
        </div>
    </div>

    <div class="section-card">
        <h2>üìÅ File Management & Pipeline Execution</h2>
        <div class="file-upload-row">
            <input type="file" id="fileInput">
            <button id="uploadBtn">‚¨ÜÔ∏è Upload File</button>
        </div>
        <div class="file-list">
            <h3>Available Files for Testing</h3>
            <div id="fileList"></div>
        </div>
    </div>

    <div class="section-card">
        <h2>üìä Results</h2>
        <div id="resultsSection">
            <div class="no-results">No Results Available</div>
            <div class="hint">Run the pipeline to generate insights.</div>
        </div>
    </div>

    <script>
        // Set timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString();

        // Fetch available files (simulate with static list or fetch from API)
        function renderFileList(files) {
            const fileListDiv = document.getElementById('fileList');
            fileListDiv.innerHTML = '';
            files.forEach(f => {
                const row = document.createElement('div');
                row.className = 'file-row';
                row.innerHTML = `
                    <span class="file-name">${f.name}</span>
                    <span class="file-meta">Size: ${f.size} KB | Modified: ${f.modified}</span>
                    <button class="run-btn" onclick="runPipeline('${f.name}')">‚ñ∂Ô∏è Run Pipeline</button>
                `;
                fileListDiv.appendChild(row);
            });
        }

        // Example static files (replace with API call if needed)
        renderFileList([
            {name: "sample-data_20260110_230120.csv", size: "0.91", modified: "2026-01-10 23:01:20"},
            {name: "sample-data_20260110_224435.csv", size: "0.91", modified: "2026-01-10 22:44:35"},
            {name: "sample-data_20260110_221051.csv", size: "0.91", modified: "2026-01-10 22:10:51"}
        ]);

        // Placeholder for pipeline run
        function runPipeline(filename) {
            document.getElementById('resultsSection').innerHTML = `
                <div class="loading">‚è≥ Running pipeline for <b>${filename}</b>...</div>
            `;
            // TODO: Call backend to run pipeline, then update results
        }
    </script>
</body>
</html>
